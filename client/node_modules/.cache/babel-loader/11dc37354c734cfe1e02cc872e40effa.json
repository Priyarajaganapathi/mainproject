{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\nisan\\\\Documents\\\\GitHub\\\\mainproject\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\nisan\\\\Documents\\\\GitHub\\\\mainproject\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\nisan\\\\Documents\\\\GitHub\\\\mainproject\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\nisan\\\\Documents\\\\GitHub\\\\mainproject\\\\client\\\\src\\\\components\\\\mainpages\\\\categories\\\\Categories.js\";\nimport React, { useState, useContext } from 'react';\nimport { GlobalState } from '../../../GlobalState';\nimport axios from 'axios';\n\nfunction Categories() {\n  var _this = this;\n\n  var state = useContext(GlobalState);\n\n  var _state$categoriesAPI$ = _slicedToArray(state.categoriesAPI.categories, 1),\n      categories = _state$categoriesAPI$[0];\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      category = _useState2[0],\n      setCategory = _useState2[1];\n\n  var _state$token = _slicedToArray(state.token, 1),\n      token = _state$token[0];\n\n  var _state$categoriesAPI$2 = _slicedToArray(state.categoriesAPI.callback, 2),\n      callback = _state$categoriesAPI$2[0],\n      setCallback = _state$categoriesAPI$2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      onEdit = _useState4[0],\n      setOnEdit = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      id = _useState6[0],\n      setID = _useState6[1];\n\n  var createCategory = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var res, _res;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.prev = 1;\n\n              if (!onEdit) {\n                _context.next = 9;\n                break;\n              }\n\n              _context.next = 5;\n              return axios.put(\"/api/category/\".concat(id), {\n                name: category\n              }, {\n                headers: {\n                  Authorization: token\n                }\n              });\n\n            case 5:\n              res = _context.sent;\n              alert(res.data.msg);\n              _context.next = 13;\n              break;\n\n            case 9:\n              _context.next = 11;\n              return axios.post('/api/category', {\n                name: category\n              }, {\n                headers: {\n                  Authorization: token\n                }\n              });\n\n            case 11:\n              _res = _context.sent;\n              alert(_res.data.msg);\n\n            case 13:\n              setOnEdit(false);\n              setCategory('');\n              setCallback(!callback);\n              _context.next = 21;\n              break;\n\n            case 18:\n              _context.prev = 18;\n              _context.t0 = _context[\"catch\"](1);\n              alert(_context.t0.response.data.msg);\n\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 18]]);\n    }));\n\n    return function createCategory(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var editCategory = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id, name) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setID(id);\n              setCategory(name);\n              setOnEdit(true);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function editCategory(_x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var deleteCategory = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.delete(\"/api/category/\".concat(id), {\n                headers: {\n                  Authorization: token\n                }\n              });\n\n            case 3:\n              res = _context3.sent;\n              alert(res.data.msg);\n              setCallback(!callback);\n              _context3.next = 11;\n              break;\n\n            case 8:\n              _context3.prev = 8;\n              _context3.t0 = _context3[\"catch\"](0);\n              alert(_context3.t0.response.data.msg);\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 8]]);\n    }));\n\n    return function deleteCategory(_x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"categories\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: createCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"category\",\n    value: category,\n    required: true,\n    onChange: function onChange(e) {\n      return setCategory(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, onEdit ? \"Update\" : \"Create\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, categories.map(function (category) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      key: category._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 29\n      }\n    }, category.name), /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: function onClick() {\n        return editCategory(category._id, category.name);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 33\n      }\n    }, \"Edit\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: function onClick() {\n        return deleteCategory(category._id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 33\n      }\n    }, \"Delete\")));\n  })));\n}\n\nexport default Categories;","map":{"version":3,"sources":["C:/Users/nisan/Documents/GitHub/mainproject/client/src/components/mainpages/categories/Categories.js"],"names":["React","useState","useContext","GlobalState","axios","Categories","state","categoriesAPI","categories","category","setCategory","token","callback","setCallback","onEdit","setOnEdit","id","setID","createCategory","e","preventDefault","put","name","headers","Authorization","res","alert","data","msg","post","response","editCategory","deleteCategory","delete","target","value","map","_id"],"mappings":"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","sourcesContent":["import React, {useState, useContext} from 'react'\r\nimport {GlobalState} from '../../../GlobalState'\r\nimport axios from 'axios'\r\n\r\nfunction Categories() {\r\n    const state = useContext(GlobalState)\r\n    const [categories] = state.categoriesAPI.categories\r\n    const [category, setCategory] = useState('')\r\n    const [token] = state.token\r\n    const [callback, setCallback] = state.categoriesAPI.callback\r\n    const [onEdit, setOnEdit] = useState(false)\r\n    const [id, setID] = useState('')\r\n\r\n    const createCategory = async e =>{\r\n        e.preventDefault()\r\n        try {\r\n            if(onEdit){\r\n                const res = await axios.put(`/api/category/${id}`, {name: category}, {\r\n                    headers: {Authorization: token}\r\n                })\r\n                alert(res.data.msg)\r\n            }else{\r\n                const res = await axios.post('/api/category', {name: category}, {\r\n                    headers: {Authorization: token}\r\n                })\r\n                alert(res.data.msg)\r\n            }\r\n            setOnEdit(false)\r\n            setCategory('')\r\n            setCallback(!callback)\r\n            \r\n        } catch (err) {\r\n            alert(err.response.data.msg)\r\n        }\r\n    }\r\n\r\n    const editCategory = async (id, name) =>{\r\n        setID(id)\r\n        setCategory(name)\r\n        setOnEdit(true)\r\n    }\r\n\r\n    const deleteCategory = async id =>{\r\n        try {\r\n            const res = await axios.delete(`/api/category/${id}`, {\r\n                headers: {Authorization: token}\r\n            })\r\n            alert(res.data.msg)\r\n            setCallback(!callback)\r\n        } catch (err) {\r\n            alert(err.response.data.msg)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"categories\">\r\n            <form onSubmit={createCategory}>\r\n                <label htmlFor=\"category\">Category</label>\r\n                <input type=\"text\" name=\"category\" value={category} required\r\n                onChange={e => setCategory(e.target.value)} />\r\n\r\n                <button type=\"submit\">{onEdit? \"Update\" : \"Create\"}</button>\r\n            </form>\r\n\r\n            <div className=\"col\">\r\n                {\r\n                    categories.map(category => (\r\n                        <div className=\"row\" key={category._id}>\r\n                            <p>{category.name}</p>\r\n                            <div>\r\n                                <button onClick={() => editCategory(category._id, category.name)}>Edit</button>\r\n                                <button onClick={() => deleteCategory(category._id)}>Delete</button>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Categories\r\n"]},"metadata":{},"sourceType":"module"}